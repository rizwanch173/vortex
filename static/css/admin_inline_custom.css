/* Custom CSS to match inline form fields with main form field styling */

/* ============================================
   TABULAR INLINE STYLING
   ============================================ */

/* Make inline table fields match main form field widths */
.inline-group .tabular tr.has_original td input[type="text"],
.inline-group .tabular tr.has_original td input[type="date"],
.inline-group .tabular tr.has_original td input[type="datetime-local"],
.inline-group .tabular tr.has_original td select,
.inline-group .tabular tr.form-row td input[type="text"],
.inline-group .tabular tr.form-row td input[type="date"],
.inline-group .tabular tr.form-row td input[type="datetime-local"],
.inline-group .tabular tr.form-row td select {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

/* Match the input field styling from main form */
.inline-group .tabular td input,
.inline-group .tabular td select {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    line-height: 1.5;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    background-color: #fff;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.inline-group .tabular td input:focus,
.inline-group .tabular td select:focus {
    outline: 0;
    border-color: #2563eb;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

/* Ensure table cells have proper width */
.inline-group .tabular thead th,
.inline-group .tabular tbody td {
    padding: 0.75rem;
    vertical-align: middle;
}

/* Match field label styling */
.inline-group .tabular thead th {
    font-weight: 500;
    font-size: 0.875rem;
    color: #374151;
}

/* Make sure fields are not too narrow */
.inline-group .tabular tbody td {
    min-width: 120px;
}

/* ============================================
   STACKED INLINE STYLING (Payment Inline)
   Match the exact Unfold styling from main form fields
   ============================================ */

/* PRIMARY RULE: Target ALL payment inline fields with maximum specificity */
/* This ensures payment fields match main form fields exactly */
.inline-group .stacked .form-row input:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]):not([type="file"]),
.inline-group .stacked .form-row select,
.inline-group .stacked .form-row textarea,
.inline-group .stacked input:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]):not([type="file"]),
.inline-group .stacked select,
.inline-group .stacked textarea {
    /* Match Unfold's exact styling - same as main form fields */
    border: 1px solid rgb(229, 231, 235) !important; /* border-base-200 - gray border, NOT white */
    border-color: rgb(229, 231, 235) !important; /* Force border color */
    background-color: rgb(255, 255, 255) !important; /* bg-white */
    border-radius: 0.375rem !important; /* rounded-default */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important; /* shadow-xs */
    font-size: 0.875rem !important; /* text-sm */
    line-height: 1.5 !important;
    padding: 0.5rem 0.75rem !important; /* px-3 py-2 */
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    color: rgb(17, 24, 39) !important; /* text-font-default-light */
    font-weight: 500 !important; /* font-medium */
    transition: all 0.15s ease-in-out !important;
    outline: none !important;
    margin: 0 !important; /* Remove any margins */
}

/* Select dropdown specific styling - match Unfold's select */
.inline-group .stacked .form-row select,
.inline-group .stacked select {
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    appearance: none !important;
    padding-right: 2.5rem !important; /* Space for dropdown arrow */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") !important;
    background-repeat: no-repeat !important;
    background-position: right 0.75rem center !important;
    background-size: 1rem 0.75rem !important;
    min-width: 5rem !important;
}

/* Focus state - match Unfold's focus styling exactly */
.inline-group .stacked .form-row input:focus:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
.inline-group .stacked .form-row select:focus,
.inline-group .stacked .form-row textarea:focus,
.inline-group .stacked input:focus:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
.inline-group .stacked select:focus,
.inline-group .stacked textarea:focus {
    outline: 2px solid rgb(37, 99, 235) !important; /* outline-primary-600 */
    outline-offset: -2px !important;
    border-color: rgb(37, 99, 235) !important;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1) !important;
}

/* Textarea specific styling */
.inline-group .stacked .form-row textarea,
.inline-group .stacked textarea {
    min-height: 100px;
    resize: vertical;
}

/* Readonly fields styling - match main form readonly fields */
.inline-group .stacked .form-row input[readonly],
.inline-group .stacked input[readonly] {
    background-color: rgb(249, 250, 251) !important; /* bg-gray-50 */
    cursor: not-allowed !important;
    border-color: rgb(229, 231, 235) !important;
}

/* ============================================
   TWO-COLUMN LAYOUT FOR STACKED INLINES (PAYMENT INLINE)
   Matches the fieldsets two-column layout from main form

   JavaScript adds classes to form-rows to identify pairs for two-column display.
   ============================================ */

/* Base styling for all stacked inline form rows */
.inline-group .stacked .form-row {
    margin-bottom: 1.5rem;
}

/* Target the payment inline fieldset and create a two-column grid */
/* JavaScript adds 'payment-inline-two-column' class to identify payment inlines */
.inline-group .stacked fieldset.module.payment-inline-two-column {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem 1rem;
    align-items: start;
}

/* All form-rows in the payment inline grid */
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row {
    margin-bottom: 0;
    display: flex;
    flex-direction: column;
    width: 100%; /* Ensure full width within grid column */
}

/* Ensure inputs in two-column layout maintain full width */
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row input,
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row select,
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row textarea {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Full-width fields (like timestamps) span both columns */
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row.two-column-full {
    grid-column: 1 / -1; /* Span all columns */
    margin-bottom: 1.5rem;
}

/* Add bottom margin to every other row to create visual row separation */
/* This creates spacing between logical rows (pairs of fields) */
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row:nth-child(2n) {
    margin-bottom: 1.5rem;
}

/* Ensure labels maintain proper styling in grid layout */
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row label {
    width: auto;
    float: none;
    text-align: left;
    margin-bottom: 0.5rem;
    display: block;
    font-weight: 500;
    font-size: 0.875rem;
    color: #374151;
}

/* Textarea in two-column layout - adjust for side-by-side display */
.inline-group .stacked fieldset.module.payment-inline-two-column .form-row textarea {
    min-height: 80px;
    resize: vertical;
}

/* ============================================
   INVOICE CHANGE LIST ACTIONS
   Align custom builder button with Unfold header actions
   ============================================ */

.invoice-builder-item {
    list-style: none;
}

body.model-invoice .object-tools {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

body.model-invoice .object-tools li,
body.model-invoice .object-tools li::marker,
body.model-invoice .object-tools li::before {
    list-style: none;
    content: none !important;
}

body.model-invoice .object-tools li {
    margin: 0;
    padding: 0;
}

body.model-invoice .invoice-builder-link {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.75rem;
    border-radius: 9999px;
    background-color: var(--color-primary-600, #7c3aed);
    color: #fff;
    font-size: 0.75rem;
    font-weight: 600;
    text-decoration: none;
    line-height: 1;
}

body.model-invoice .invoice-builder-link:hover,
body.model-invoice .invoice-builder-link:focus {
    background-color: var(--color-primary-700, #6d28d9);
    color: #fff;
}

/* Match the visual spacing and alignment of main form fieldsets */
.inline-group .stacked {
    padding: 1rem 0;
}

/* Ensure payment inline section header matches other sections */
.inline-group .stacked h3 {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e5e7eb;
}

/* Hide the "#1" label in Payment header */
.inline-group .stacked h3 .inline_label,
.inline-group .stacked h3 span.inline_label {
    display: none !important;
}

/* Hide the remove link */
.inline-group .stacked h3 .inline-deletelink,
.inline-group .stacked h3 span .inline-deletelink {
    display: none !important;
}

/* Hide the "Remove" button for payment inline */
.inline-group .stacked .delete input[type="checkbox"],
.inline-group .stacked .delete label,
.inline-group .stacked .inline-deletelink {
    display: none !important;
}

/* Hide the "Add another Payment" button */
.inline-group .stacked .add-row,
.inline-group .stacked .add-row a,
.inline-group[id*="payment"] .add-row,
.inline-group[id*="payment"] .add-row a {
    display: none !important;
}

/* Ensure payment fields are always visible (not hidden in empty form) */
.inline-group .stacked .empty-form {
    display: none !important;
}

/* ============================================
   ADDITIONAL PAYMENT FIELD STYLING
   Target payment fields by ID/name patterns for extra specificity
   ============================================ */

/* Target payment fields by ID/name patterns - ensures all payment fields are styled */
input[id*="payments-"]:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
select[id*="payments-"],
textarea[id*="payments-"],
input[name*="payments-"]:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
select[name*="payments-"],
textarea[name*="payments-"] {
    border: 1px solid rgb(229, 231, 235) !important;
    border-color: rgb(229, 231, 235) !important;
    background-color: rgb(255, 255, 255) !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Override any white border classes from Unfold or other sources */
.inline-group .stacked input.border-white,
.inline-group .stacked select.border-white,
.inline-group .stacked textarea.border-white,
.inline-group .stacked input[class*="border-white"],
.inline-group .stacked select[class*="border-white"],
.inline-group .stacked textarea[class*="border-white"] {
    border-color: rgb(229, 231, 235) !important;
    border: 1px solid rgb(229, 231, 235) !important;
}

/* ============================================
   FIELD-SPECIFIC STYLING (if needed for edge cases)
   ============================================ */

/* Ensure currency field (if it's a text input) matches styling */
.inline-group .stacked .field-currency input[type="text"],
.inline-group .stacked input[id*="currency"][type="text"] {
    border: 1px solid rgb(229, 231, 235) !important;
    border-color: rgb(229, 231, 235) !important;
    width: 100% !important;
}

/* ============================================
   FINAL OVERRIDE - Ensure payment fields always have correct styling
   ============================================ */

/* Final catch-all for any payment fields that might have been missed */
input[id*="payments"]:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
select[id*="payments"],
textarea[id*="payments"],
input[name*="payments"]:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
select[name*="payments"],
textarea[name*="payments"] {
    border: 1px solid rgb(229, 231, 235) !important;
    border-color: rgb(229, 231, 235) !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Override any white border classes from Unfold */
.inline-group .stacked input.border-white,
.inline-group .stacked select.border-white,
.inline-group .stacked textarea.border-white,
.inline-group .stacked input[class*="border-white"],
.inline-group .stacked select[class*="border-white"],
.inline-group .stacked textarea[class*="border-white"] {
    border-color: rgb(229, 231, 235) !important;
    border: 1px solid rgb(229, 231, 235) !important;
}

/* Ensure labels are properly styled */
.inline-group .stacked .field-amount label,
.inline-group .stacked .field-currency label,
.inline-group .stacked .field-payment_status label,
.inline-group .stacked .field-payment_method label,
.inline-group .stacked .field-payment_requested_date label,
.inline-group .stacked .field-payment_received_date label,
.inline-group .stacked .field-transaction_id label,
.inline-group .stacked .field-notes label {
    font-weight: 500;
    font-size: 0.875rem;
    color: #374151;
    margin-bottom: 0.5rem;
    display: block;
}

/* Select dropdown arrow - Unfold uses material-symbols-outlined icon, but we'll add a CSS arrow as fallback */
.inline-group .stacked select,
.inline-group .stacked .form-row select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") !important;
    background-repeat: no-repeat !important;
    background-position: right 0.75rem center !important;
    background-size: 1rem 0.75rem !important;
}

/* Field label styling in stacked inlines */
.inline-group .stacked .form-row label {
    font-weight: 500;
    font-size: 0.875rem;
    color: #374151;
    margin-bottom: 0.5rem;
    display: block;
}

/* Help text styling */
.inline-group .stacked .form-row .help {
    font-size: 0.875rem;
    color: #6b7280;
    margin-top: 0.25rem;
}

/* Form row spacing */
.inline-group .stacked .form-row {
    margin-bottom: 1.5rem;
}

/* Aligned fields (side by side) */
.inline-group .stacked .form-row.aligned label {
    width: 160px;
    padding: 0.5rem 1rem 0 0;
    float: left;
    text-align: right;
}

.inline-group .stacked .form-row.aligned .form-row {
    margin-left: 180px;
}

/* Clear floats */
.inline-group .stacked .form-row.aligned::after {
    content: "";
    display: table;
    clear: both;
}

/* ============================================
   REMOVED: Redundant selectors consolidated above
   ============================================ */

/* ============================================
   FINAL OVERRIDE - Ensure consistent styling
   ============================================ */

/* Override any inline styles or classes that might set white borders */
.inline-group .stacked input[style*="border"],
.inline-group .stacked select[style*="border"],
.inline-group .stacked textarea[style*="border"] {
    border-color: rgb(229, 231, 235) !important;
}

/* Target payment inline by class/ID as final fallback */
#payments-group input:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
#payments-group select,
#payments-group textarea,
.payments-group input:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
.payments-group select,
.payments-group textarea,
.inline-related[id*="payment"] input:not([type="hidden"]):not([type="checkbox"]):not([type="radio"]),
.inline-related[id*="payment"] select,
.inline-related[id*="payment"] textarea {
    border: 1px solid rgb(229, 231, 235) !important;
    border-color: rgb(229, 231, 235) !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}
